{"version":3,"sources":["components/header/header.js","components/search/search.js","index.js"],"names":["Header","react_default","a","createElement","className","Search","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","display","favorites","favorite_output","output","searchQuery","bind","assertThisInitialized","k","length","document","getElementById","classList","favorite","j","splice","forceUpdate","e","_this2","keywords","value","alert","i","props","itemList","includes","toLowerCase","push","title","body","_","map","key","style","color","id","onClick","event","foundFav","x","target","deleteFav","ReactHtmlParser","_this3","action","onKeyPress","ev","onChange","type","placeholder","lib_default","React","Component","Home","items","fetch","then","res","json","setState","header_header","search_Search","ReactDOM","render","src_Home"],"mappings":"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","file":"static/js/main.cabc16c4.chunk.js","sourcesContent":["/*\r\n  Author: Abir Abbas\r\n  Date: 1/20/2019\r\n  Time: 9:46pm (Guelph, Ontario)\r\n*/\r\n\r\nimport React from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './header.css';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <div className=\"container-fluid top-header\">\r\n      <h1 className=\"title-header\">Toronto Waste Lookup</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;","/*\r\n  Author: Abir Abbas\r\n  Date: 1/20/2019\r\n  Time: 9:46pm (Guelph, Ontario)\r\n*/\r\n\r\nimport React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./search.css\";\r\nimport \"./favorite.css\";\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\r\nimport _ from \"lodash\";\r\nimport ReactHtmlParser from 'react-html-parser';\r\n\r\nexport default class Search extends React.Component {\r\n\r\n  //follow default behavior other than binding searchQuery function\r\n  //to give access to \"this\" within the function\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      display: null,\r\n      favorites: [],\r\n      favorite_output: null,\r\n      output: null\r\n    };\r\n\r\n    this.searchQuery = this.searchQuery.bind(this);\r\n  }\r\n\r\n  //scan favorites and update favorite stars everytime the screen is rendered\r\n  componentDidUpdate() {\r\n    for (var k = 0; k < this.state.favorites.length; k++) {\r\n      if (document.getElementById(this.state.favorites[k][0]) != null) {\r\n        document.getElementById(this.state.favorites[k][0]).classList =\r\n          \"fa fa-star green\";\r\n      }\r\n    }\r\n  }\r\n\r\n  //delete favorite event handler when click on stars at the bottom\r\n  deleteFav(favorite) {\r\n    for (var j = 0; j < this.state.favorites.length; j++) {\r\n      if (this.state.favorites[j][0] === favorite[0]) {\r\n        if (document.getElementById(favorite[0]) != null) {\r\n          document.getElementById(favorite[0]).className = \"fa fa-star\";\r\n        }\r\n\r\n        this.state.favorites.splice(j, 1);\r\n        this.state.favorite_output.splice(j, 1);\r\n      }\r\n    }\r\n    this.forceUpdate();\r\n  }\r\n\r\n\r\n  //query a search within the existing state containing all records\r\n  //return only the ones that match the keywords\r\n  searchQuery(e) {\r\n\r\n    var keywords = document.getElementById(\"keywords-input\").value;\r\n\r\n    //dont allow searches without keywords\r\n    if (keywords === \"\") {\r\n      alert(\"Please enter a keyword to search\");\r\n    } else {\r\n      // eslint-disable-next-line\r\n      this.state.display = [];\r\n\r\n      //push all elements that have matching keywords into the array which will be used to display content\r\n      for (var i = 0; i < this.props.itemList.length; i++) {\r\n        if (this.props.itemList[i].keywords.includes(keywords.toLowerCase())) {\r\n          this.state.display.push([\r\n            this.props.itemList[i].title,\r\n            this.props.itemList[i].body\r\n          ]);\r\n        }\r\n      }\r\n\r\n      //convert the array containing all elements to be displayed into a HTML format so the browser may render it\r\n      var output = _.map(this.state.display, display => {\r\n        var color = {\r\n          color: \"grey\"\r\n        };\r\n\r\n        return (\r\n          <div key={display[0]} className=\"row search-result\">\r\n            <div className=\"col-6 row\">\r\n              <div className=\"col-2 search-star\">\r\n                <i\r\n                  style={color}\r\n                  id={display[0]}\r\n                  className=\"fa fa-star\"\r\n                  onClick={event => {\r\n                    var foundFav = false;\r\n                    //check if currently selected favorite already exists, if not then add it\r\n                    for (var x = 0; x < this.state.favorites.length; x++) {\r\n                      if (this.state.favorites[x][0] === display[0]) {\r\n                        foundFav = true;\r\n                        break;\r\n                      }\r\n                    }\r\n\r\n                    //favorite doesn't exist therefore, add it\r\n                    if (foundFav === false) {\r\n                      event.target.className += \" green\";\r\n                      // eslint-disable-next-lin\r\n                      this.state.favorites.push([display[0], display[1]]);\r\n                      // eslint-disable-next-line\r\n                      this.state.favorite_output = [];\r\n                      // eslint-disable-next-line\r\n                      this.state.favorite_output = _.map(\r\n                        this.state.favorites,\r\n                        favorite => {\r\n                          return (\r\n                            <div key={favorite[0]} className=\"row search-result\">\r\n                              <div className=\"col-6 row\">\r\n                                <div className=\"col-2 search-star\">\r\n                                  <i\r\n                                    className=\"green fa fa-star\"\r\n                                    onClick={() => this.deleteFav(favorite)}\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-10 search-name\">\r\n                                  <p>{favorite[0]}</p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"col-6 search-content\">\r\n                                {ReactHtmlParser(ReactHtmlParser(favorite[1]))}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        }\r\n                      );\r\n                    }\r\n                    this.forceUpdate();\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"col-10 search-name\">\r\n                <p>{display[0]}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-6 search-content\">\r\n              {\r\n                //for some odd reason it would display HTML tags as raw if this function wasn't called twice\r\n                ReactHtmlParser(ReactHtmlParser(display[1]))\r\n              }\r\n            </div>\r\n          </div>\r\n        );\r\n      });\r\n      // eslint-disable-next-line\r\n      this.state.output = output;\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"container-fluid search\">\r\n          <div className=\"row\">\r\n            <div className=\"search-form\" action=\"\">\r\n              <input\r\n                onKeyPress={(ev) => {\r\n                  if (ev.key === 'Enter') {\r\n                    // Do code here\r\n                    this.searchQuery();\r\n                  }\r\n                }}\r\n                onChange={(event) => {\r\n                  if (event.target.value === '') {\r\n                    // eslint-disable-next-line\r\n                    this.state.output = \"\";\r\n                    this.forceUpdate();\r\n                  }\r\n                }\r\n                }\r\n                id=\"keywords-input\"\r\n                type=\"text\"\r\n                className=\"form-control search-input\"\r\n                placeholder=\"Text input\"\r\n              />\r\n              <button\r\n                className=\"search-button-square\"\r\n                type=\"submit\"\r\n                onClick={this.searchQuery}\r\n              >\r\n                <i className=\"fa fa-search\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <PerfectScrollbar className=\"search-result-group container-fluid\">\r\n            <div id=\"display-content\">{this.state.output}</div>\r\n          </PerfectScrollbar>\r\n        </div>\r\n        <div className=\"container-fluid favorite\">\r\n          <h1 className=\"favorite-title\">Favorites</h1>\r\n\r\n          <PerfectScrollbar className=\"favorite-content-group\">\r\n            <div id=\"display-favorite\">{this.state.favorite_output}</div>\r\n          </PerfectScrollbar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/*\n  Author: Abir Abbas\n  Date: 1/20/2019\n  Time: 9:46pm (Guelph, Ontario)\n*/\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Header from \"./components/header/header\";\nimport Search from \"./components/search/search\";\nimport \"react-perfect-scrollbar/dist/css/styles.css\";\n\nclass Home extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      items: null\n    };\n  }\n\n  //call API once and store data for future access\n  componentWillMount() {\n    var url =\n      \"https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000\";\n\n    fetch(url)\n      .then(res => res.json())\n      .then(json => {\n        this.setState({ items: json });\n      });\n\n    document.title = \"Shopify-Waste-Wizard\"\n  }\n\n  //render header and search components\n  render() {\n    return (\n      <div>\n        <Header />\n        <Search itemList={this.state.items} />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Home />, document.getElementById(\"root\"));\n"],"sourceRoot":""}